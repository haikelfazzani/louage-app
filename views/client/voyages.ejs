<%- include('../partials/head.ejs') -%>
<%- include('../partials/navbar') -%>
<style>
  .card {
    font-family: Arial, sans-serif;
    border: 4px solid #f5f5f5;
    margin-bottom: 10px;
    box-shadow: 0 2px 5px 0 rgba(19, 41, 104, .2);
  }

  .card h3 {
    font-size: 1.2rem !important;
    font-weight: 600;
  }
</style>
<section class="page-header">
  <div class="col-md-12">
    <h3>Voyages</h3>
  </div>

  <div class="bread">
    <a href="/">accueil </a>
    <a href="#" disabled> / Voyages</a>
  </div>
</section>

<div class="container-fluid py-6">
  <div class="container">
    <%- include('chercher-voyage') -%>
    <div class="row">
      <% if(locals.voyages && locals.voyages.length > 0) { %>
      <div class="col-md-6 mb-3">

        <% voyages.forEach(v => { %>
        <div class="card text-uppercase">
          <div class="card-body">

            <h3 class="card-title">
              <i class="fas fa-road"></i> De <span> <%= v.nom_station  %> <i class="fas fa-arrow-circle-right"
                  style="color:#dc3545"></i> </span>
              <span> <%= v.destination %></span>
            </h3>

            <div style="display: flex; justify-content: space-between;">
              <div class="btn btn-light"><i class="fas fa-calendar-week"></i> <%= v.date_depart %></div>
              <div class="btn btn-light"><i class="fas fa-clock"></i> <%= v.heure_depart %>h</div>
              <div class="btn btn-success"><i class="fas fa-coins"></i> <%= v.prix_place %> DNT</div>

              <% if(parseInt(v.nb_places) > 0) { %>
              <a class="btn btn-danger btn-get-voayge" href="/reservations?v=<%= v.uid_voyage %>">
                <i class="fas fa-chevron-circle-right ml-2"></i>
              </a>
              <% } %>
            </div>

          </div>
        </div>
        <% }) %>

      </div>

      <div class="col-md-6 mb-3" style="display: flex;
      justify-content: center;
      align-items: center;">

        <iframe id='mapcanvas'
          src='https://maps.google.com/maps?q=<%= encodeURIComponent(locals.voyages[0].nom_station) %>&amp;t=&amp;z=12&amp;ie=UTF8&amp;iwloc=&amp;output=embed'
          frameborder='0' scrolling='no' marginheight='0' marginwidth='0'>
        </iframe>

      </div>

      <% } else { %>
      <div class="col-md-6">
        <div class="alert" role="alert">
          <h1 class="alert-heading"><i class="fas fa-info-circle"></i> Nous somme désolés</h1>
          <h4>Pour le moment, il n'existe aucun voyage pour cette station.</h4>
          <hr>
          <h3 class="mb-0">Veuillez réessayer plus tard, Merci.</h3>
        </div>
      </div>
      <% } %>
    </div>
  </div>
</div>
<%- include('../partials/footer.ejs') -%>